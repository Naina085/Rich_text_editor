<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.13.1/font/bootstrap-icons.min.css">
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&family=Lato:ital,wght@0,100;0,300;0,400;0,700;0,900;1,100;1,300;1,400;1,700;1,900&family=Montserrat:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Source+Sans+Pro:ital,wght@0,200;0,300;0,400;0,600;0,700;0,900;1,200;1,300;1,400;1,600;1,700;1,900&family=Ubuntu:ital,wght@0,300;0,400;0,500;0,700;1,300;1,400;1,500;1,700&family=Nunito:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Inter:wght@100;200;300;400;500;600;700;800;900&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&family=Oswald:wght@200;300;400;500;600;700&family=PT+Sans:ital,wght@0,400;0,700;1,400;1,700&family=Crimson+Text:ital,wght@0,400;0,600;0,700;1,400;1,600;1,700&family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&family=Fira+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Work+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Quicksand:wght@300;400;500;600;700&family=Dancing+Script:wght@400;500;600;700&family=Pacifico&family=Lobster&family=Great+Vibes&family=Satisfy&family=Kaushan+Script&family=Caveat:wght@400;500;600;700&family=Indie+Flower&family=Amatic+SC:wght@400;700&family=Righteous&family=Bangers&family=Fredoka+One&family=Comfortaa:wght@300;400;500;600;700&family=Orbitron:wght@400;500;600;700;800;900&family=Exo+2:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Space+Mono:ital,wght@0,400;0,700;1,400;1,700&family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Fira+Code:wght@300;400;500;600;700&family=Source+Code+Pro:ital,wght@0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Roboto+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=Ubuntu+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Inconsolata:wght@200;300;400;500;600;700;800;900&family=Audiowide&family=Electrolize&family=Syncopate:wght@400;700&family=Lora:ital,wght@0,400;0,500;0,600;0,700;1,400;1,500;1,600;1,700&family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Vollkorn:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Bebas+Neue&family=Anton&family=Fjalla+One&family=Russo+One&family=Shadows+Into+Light&family=Permanent+Marker&display=swap"
        rel="stylesheet">

    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem;
            position: relative;
        }

        /* Animated background */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            animation: float 20s ease-in-out infinite;
            z-index: -1;
        }

        @keyframes float {

            0%,
            100% {
                transform: translateY(0px) rotate(0deg);
            }

            33% {
                transform: translateY(-20px) rotate(1deg);
            }

            66% {
                transform: translateY(10px) rotate(-1deg);
            }
        }

        .editor-container {
            max-width: 1400px;
            margin: 0 auto;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
            backdrop-filter: blur(20px);
            border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25), 0 0 0 1px rgba(255, 255, 255, 0.2);
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.2);
            position: relative;
            z-index: 10;
        }

        /* Header gradient */
        .header-gradient {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 1px;
            border-radius: 24px 24px 0 0;
        }

        .header-content {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 23px 23px 0 0;
        }










        /* * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: Arial, sans-serif;
            background-color: #f9fafb;
            padding: 20px;
        }
 */
        .editor-container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        /* Navbar Styles */
        .navbar {
            background-color: #f3f4f6;
            border-bottom: 1px solid #e5e7eb;
            padding: 8px 16px;
        }

        .navbar>ul {
            list-style: none;
            display: flex;
            gap: 24px;
        }

        .navbar li {
            padding: 4px 12px;
            cursor: pointer;
            border-radius: 4px;
            font-size: 14px;
            transition: background-color 0.2s;
        }

        .navbar li:hover {
            background-color: #42a7f5;
        }

        /* Toolbar Styles */
        .toolbar {
            background-color: #f9fafb;
            border-bottom: 1px solid #e5e7eb;
            padding: 12px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
        }

        .toolbar-left {
            display: flex;
            align-items: center;
            gap: 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            /* overflow: hidden; */
        }

        .toolbar-right {
            display: flex;
            align-items: center;
            gap: 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            overflow: hidden;
        }

        .toolbar-left .toolbar-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s;
            border-right: 1px solid #e5e7eb;
        }

        .toolbar-left .toolbar-btn:hover {
            background-color: #f3f4f6;
        }

        .toolbar-left .toolbar-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .font-family-select {
            width: 200px;
            height: 36px;
            padding: 4px 8px;
            border: none;
            border-right: 1px solid #e5e7eb;
            background: transparent;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }

        .font-size-select {
            width: 60px;
            height: 36px;
            padding: 4px 8px;
            border: none;
            border-right: 1px solid #e5e7eb;
            background: transparent;
            font-size: 14px;
            cursor: pointer;
            outline: none;
        }

        /* .color-picker-container {
            position: relative;
            display: inline-block;
        }

        .color-picker-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            border-right: 1px solid #e5e7eb;
            transition: all 0.2s;
        }

        .color-picker-btn:hover {
            background-color: #f3f4f6;
        }

        .color-picker-btn:last-child {
            border-right: none;
        }

        .color-picker-dropdown {
            position: absolute;
            top: calc(100% + 5px);
            left: 0;
            background: white;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            padding: 12px;
            display: none;
            z-index: 9999;
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
            width: 280px;
            max-height: 400px;
            overflow-y: auto;
        }

        .color-picker-dropdown.show {
            display: block;
        }

        .color-section {
            margin-bottom: 12px;
        }

        .color-section-title {
            font-size: 12px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 6px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .color-grid {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: 3px;
            margin-bottom: 8px;
        }

        .color-grid.large {
            grid-template-columns: repeat(6, 1fr);
        }

        .color-option {
            width: 28px;
            height: 28px;
            border: 2px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
            position: relative;
        }

        .color-option:hover {
            transform: scale(1.1);
            border-color: #3b82f6;
            z-index: 1;
        }

        .gradient-option {
            width: 40px;
            height: 28px;
            border: 2px solid #e5e7eb;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .gradient-option:hover {
            transform: scale(1.05);
            border-color: #3b82f6;
        }

        .custom-color-section {
            border-top: 1px solid #e5e7eb;
            padding-top: 12px;
            margin-top: 12px;
        }

        .custom-color-input {
            width: 100%;
            height: 40px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            cursor: pointer;
            margin-bottom: 8px;
        }

        .color-input-group {
            display: flex;
            gap: 8px;
            align-items: center;
            margin-bottom: 8px;
        }

        .color-input-group input[type="text"] {
            flex: 1;
            padding: 6px 8px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 12px;
            font-family: monospace;
        }

        .recent-colors {
            display: flex;
            gap: 4px;
            flex-wrap: wrap;
        }

        .recent-color {
            width: 24px;
            height: 24px;
            border: 1px solid #d1d5db;
            border-radius: 3px;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .recent-color:hover {
            transform: scale(1.1);
        }

        .opacity-slider {
            width: 100%;
            margin: 8px 0;
        }

        .color-preview {
            width: 100%;
            height: 30px;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            margin-bottom: 8px;
        } */

        .toolbar-right .toolbar-btn {
            width: 36px;
            height: 36px;
            border: none;
            background: transparent;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            transition: all 0.2s;
            border-right: 1px solid #e5e7eb;
        }

        .toolbar-right .toolbar-btn:last-child {
            border-right: none;
        }

        .toolbar-right .toolbar-btn:hover {
            background-color: #f3f4f6;
        }

        .toolbar-right .toolbar-btn.active {
            background-color: #3b82f6;
            color: white;
        }

        /* Font-specific styling for dropdown options */
        .font-family-select option {
            padding: 8px;
            font-size: 14px;
            line-height: 1.4;
        }

        /* System Fonts */
        .font-family-select option[value="Arial"] {
            font-family: Arial, sans-serif;
        }

        .font-family-select option[value="Helvetica"] {
            font-family: Helvetica, sans-serif;
        }

        .font-family-select option[value="Times New Roman"] {
            font-family: "Times New Roman", serif;
        }

        .font-family-select option[value="Times"] {
            font-family: Times, serif;
        }

        .font-family-select option[value="Courier New"] {
            font-family: "Courier New", monospace;
        }

        .font-family-select option[value="Courier"] {
            font-family: Courier, monospace;
        }

        .font-family-select option[value="Verdana"] {
            font-family: Verdana, sans-serif;
        }

        .font-family-select option[value="Georgia"] {
            font-family: Georgia, serif;
        }

        .font-family-select option[value="Palatino"] {
            font-family: Palatino, serif;
        }

        .font-family-select option[value="Garamond"] {
            font-family: Garamond, serif;
        }

        .font-family-select option[value="Bookman"] {
            font-family: Bookman, serif;
        }

        .font-family-select option[value="Comic Sans MS"] {
            font-family: "Comic Sans MS", cursive;
        }

        .font-family-select option[value="Trebuchet MS"] {
            font-family: "Trebuchet MS", sans-serif;
        }

        .font-family-select option[value="Arial Black"] {
            font-family: "Arial Black", sans-serif;
        }

        .font-family-select option[value="Impact"] {
            font-family: Impact, sans-serif;
        }

        /* Sans-Serif Google Fonts */
        .font-family-select option[value="Roboto"] {
            font-family: "Roboto", sans-serif;
        }

        .font-family-select option[value="Open Sans"] {
            font-family: "Open Sans", sans-serif;
        }

        .font-family-select option[value="Lato"] {
            font-family: "Lato", sans-serif;
        }

        .font-family-select option[value="Montserrat"] {
            font-family: "Montserrat", sans-serif;
        }

        .font-family-select option[value="Source Sans Pro"] {
            font-family: "Source Sans Pro", sans-serif;
        }

        .font-family-select option[value="Ubuntu"] {
            font-family: "Ubuntu", sans-serif;
        }

        .font-family-select option[value="Nunito"] {
            font-family: "Nunito", sans-serif;
        }

        .font-family-select option[value="Raleway"] {
            font-family: "Raleway", sans-serif;
        }

        .font-family-select option[value="Poppins"] {
            font-family: "Poppins", sans-serif;
        }

        .font-family-select option[value="Inter"] {
            font-family: "Inter", sans-serif;
        }

        .font-family-select option[value="PT Sans"] {
            font-family: "PT Sans", sans-serif;
        }

        .font-family-select option[value="Fira Sans"] {
            font-family: "Fira Sans", sans-serif;
        }

        .font-family-select option[value="Work Sans"] {
            font-family: "Work Sans", sans-serif;
        }

        .font-family-select option[value="Quicksand"] {
            font-family: "Quicksand", sans-serif;
        }

        .font-family-select option[value="Comfortaa"] {
            font-family: "Comfortaa", sans-serif;
        }

        /* Serif Google Fonts */
        .font-family-select option[value="Playfair Display"] {
            font-family: "Playfair Display", serif;
        }

        .font-family-select option[value="Merriweather"] {
            font-family: "Merriweather", serif;
        }

        .font-family-select option[value="Crimson Text"] {
            font-family: "Crimson Text", serif;
        }

        .font-family-select option[value="Libre Baskerville"] {
            font-family: "Libre Baskerville", serif;
        }

        .font-family-select option[value="Lora"] {
            font-family: "Lora", serif;
        }

        .font-family-select option[value="PT Serif"] {
            font-family: "PT Serif", serif;
        }

        .font-family-select option[value="Cormorant Garamond"] {
            font-family: "Cormorant Garamond", serif;
        }

        .font-family-select option[value="Vollkorn"] {
            font-family: "Vollkorn", serif;
        }

        /* Display Google Fonts */
        .font-family-select option[value="Oswald"] {
            font-family: "Oswald", sans-serif;
        }

        .font-family-select option[value="Righteous"] {
            font-family: "Righteous", sans-serif;
        }

        .font-family-select option[value="Bangers"] {
            font-family: "Bangers", cursive;
        }

        .font-family-select option[value="Fredoka One"] {
            font-family: "Fredoka One", cursive;
        }

        .font-family-select option[value="Bebas Neue"] {
            font-family: "Bebas Neue", cursive;
        }

        .font-family-select option[value="Anton"] {
            font-family: "Anton", sans-serif;
        }

        .font-family-select option[value="Fjalla One"] {
            font-family: "Fjalla One", sans-serif;
        }

        .font-family-select option[value="Russo One"] {
            font-family: "Russo One", sans-serif;
        }

        /* Script/Handwriting Google Fonts */
        .font-family-select option[value="Dancing Script"] {
            font-family: "Dancing Script", cursive;
        }

        .font-family-select option[value="Pacifico"] {
            font-family: "Pacifico", cursive;
        }

        .font-family-select option[value="Lobster"] {
            font-family: "Lobster", cursive;
        }

        .font-family-select option[value="Great Vibes"] {
            font-family: "Great Vibes", cursive;
        }

        .font-family-select option[value="Satisfy"] {
            font-family: "Satisfy", cursive;
        }

        .font-family-select option[value="Kaushan Script"] {
            font-family: "Kaushan Script", cursive;
        }

        .font-family-select option[value="Caveat"] {
            font-family: "Caveat", cursive;
        }

        .font-family-select option[value="Indie Flower"] {
            font-family: "Indie Flower", cursive;
        }

        .font-family-select option[value="Amatic SC"] {
            font-family: "Amatic SC", cursive;
        }

        .font-family-select option[value="Shadows Into Light"] {
            font-family: "Shadows Into Light", cursive;
        }

        .font-family-select option[value="Permanent Marker"] {
            font-family: "Permanent Marker", cursive;
        }

        /* Monospace Google Fonts */
        .font-family-select option[value="Space Mono"] {
            font-family: "Space Mono", monospace;
        }

        .font-family-select option[value="JetBrains Mono"] {
            font-family: "JetBrains Mono", monospace;
        }

        .font-family-select option[value="Fira Code"] {
            font-family: "Fira Code", monospace;
        }

        .font-family-select option[value="Source Code Pro"] {
            font-family: "Source Code Pro", monospace;
        }

        .font-family-select option[value="Roboto Mono"] {
            font-family: "Roboto Mono", monospace;
        }

        .font-family-select option[value="Ubuntu Mono"] {
            font-family: "Ubuntu Mono", monospace;
        }

        .font-family-select option[value="Inconsolata"] {
            font-family: "Inconsolata", monospace;
        }

        /* Futuristic Google Fonts */
        .font-family-select option[value="Orbitron"] {
            font-family: "Orbitron", sans-serif;
        }

        .font-family-select option[value="Exo 2"] {
            font-family: "Exo 2", sans-serif;
        }

        .font-family-select option[value="Audiowide"] {
            font-family: "Audiowide", cursive;
        }

        .font-family-select option[value="Electrolize"] {
            font-family: "Electrolize", sans-serif;
        }

        .font-family-select option[value="Syncopate"] {
            font-family: "Syncopate", sans-serif;
        }

        .font-family-select optgroup {
            font-weight: bold;
            color: #666;
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
            padding: 4px 8px;
        }

        .text-area-container {
            padding: 16px;
        }

        .text-area {
            width: 100%;
            height: 400px;
            padding: 16px;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            resize: none;
            font-size: 14px;
            font-family: Arial, sans-serif;
            line-height: 1.5;
            outline: none;
            transition: border-color 0.2s;
            overflow: scroll;
        }

        .text-area:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        .status-bar {
            background-color: #f3f4f6;
            border-top: 1px solid #e5e7eb;
            padding: 8px 16px;
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #6b7280;
        }

        @media (max-width: 768px) {
            .toolbar {
                flex-direction: column;
                align-items: stretch;
                gap: 8px;
            }

            .toolbar-left,
            .toolbar-right {
                width: 100%;
                justify-content: center;
            }
        }

        .file-navbar {
            position: relative;
            display: inline-block;
        }

        .file-menu {
            display: none;
            position: absolute;
            background-color: #f0f0f0;
            list-style-type: none;
            margin: 0;
            border: 1px solid #ccc;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
            width: 150px;
        }

        .file-menu li {
            border-bottom: 1px solid #d9d8d4;
        }

        .file-navbar:hover .file-menu {
            display: block;
            width: 120px;


        }

        .file-navbar-2 {
            position: relative;
            cursor: pointer;
        }

        .file-navbar-2:hover .file-menu {
            display: block;
            width: 100px;
        }

        .file-navbar-3:hover .file-menu {
            display: block;
            width: 140px;
        }

        .file-navbar-5 {
            position: relative;
            cursor: pointer;
        }

        .file-navbar-5:hover .file-menu {
            display: block;
            width: 150px;
        }

        .file-navbar-5 {
            z-index: 99;

        }

        .fomenu {
            /* display: none; */
            position: absolute;
            background-color: #f0f0f0;
            list-style-type: none;
            padding: 10px;
            margin: 0;
            border: 1px solid #ccc;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
            width: 125px;
        }

        .fontmenu:hover .fomenu {
            display: block;
        }



        .sub-menu {
            display: none;
            position: absolute;
            background-color: #f0f0f0;
            list-style-type: none;
            padding: 10px;
            margin: 0;
            border: 1px solid #ccc;
            box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
            width: 125px;

        }

        .file-navbar-6:hover .sub-menu {
            display: block;
            position: absolute;
            margin-left: 80px;
            margin-top: -20px;
            width: 130px;
        }

        #submitBtn {
            background-color: #3b82f6;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            margin-left: 310px
        }


        /* Button */
        .file-navbar-3 {
            position: relative;
            list-style: none;
            cursor: pointer;
            background-color: #f0f0f0;
            padding: 10px;
            width: fit-content;
        }

        .file-menu {
            display: none;
            position: absolute;
            background-color: #fff;
            border: 1px solid #ccc;
            list-style: none;
            padding: 5px 0;
            margin: 0;
            top: 100%;
            left: 0;
            z-index: 10;
        }

        .file-navbar-3.show-menu .file-menu {
            display: block;
        }

        .file-menu li {
            padding: 5px 15px;
            white-space: nowrap;
        }

        .file-menu li:hover {
            background-color: #eee;
        }

        .text-area {
            width: 100%;
            min-height: 200px;
            border: 1px solid #ccc;
            padding: 10px;
            margin-top: 20px;
            font-family: sans-serif;
        }

        hr {
            border: none;
            border-top: 1px solid #e3dfde;
            margin: 10px 0;
        }

        .font-family-select-menu option {
            padding: 8px;
            font-size: 14px;
            line-height: 1.4;
        }

        /* System Fonts */
        .font-family-select-menu option[value="Arial"] {

            font-family: Arial, sans-serif;
        }

        .font-family-select-menu option[value="Helvetica"] {

            font-family: Helvetica, sans-serif;
        }

        .font-family-select-menu option[value="Times New Roman"] {
            font-family: "Times New Roman", serif;
        }

        .font-family-select-menu option[value="Times"] {
            font-family: Times, serif;
        }

        .font-family-select-menu option[value="Courier New"] {
            font-family: "Courier New", monospace;
        }

        .font-family-select-menu option[value="Courier"] {

            font-family: Courier, monospace;
        }

        .font-family-select-menu option[value="Verdana"] {
            font-family: Verdana, sans-serif;
        }

        .font-family-select-menu option[value="Georgia"] {
            font-family: Georgia, serif;
        }

        .font-family-select-menu option[value="Palatino"] {
            font-family: Palatino, serif;
        }

        .font-family-select-menu option[value="Garamond"] {
            font-family: Garamond, serif;
        }

        .font-family-select-menu option[value="Bookman"] {
            font-family: Bookman, serif;
        }

        .font-family-select-menu option[value="Comic Sans MS"] {
            font-family: "Comic Sans MS", cursive;
        }

        .font-family-select-menu option[value="Trebuchet MS"] {
            font-family: "Trebuchet MS", sans-serif;
        }

        .font-family-select-menu option[value="Arial Black"] {
            font-family: "Arial Black", sans-serif;
        }

        .font-family-select-menu option[value="Impact"] {

            font-family: Impact, sans-serif;
        }

        /* Sans-Serif Google Fonts */
        .font-family-select-menu option[value="Roboto"] {
            font-family: "Roboto", sans-serif;
        }

        .font-family-select-menu option[value="Open Sans"] {
            font-family: "Open Sans", sans-serif;
        }

        .font-family-select-menu option[value="Lato"] {
            font-family: "Lato", sans-serif;
        }

        .font-family-select-menu option[value="Montserrat"] {
            font-family: "Montserrat", sans-serif;
        }

        .font-family-select-menu option[value="Source Sans Pro"] {
            font-family: "Source Sans Pro", sans-serif;
        }

        .font-family-select-menu option[value="Ubuntu"] {
            font-family: "Ubuntu", sans-serif;
        }

        .font-family-select-menu option[value="Nunito"] {
            font-family: "Nunito", sans-serif;
        }

        .font-family-select-menu option[value="Raleway"] {
            font-family: "Raleway", sans-serif;
        }

        .font-family-select-menu option[value="Poppins"] {
            font-family: "Poppins", sans-serif;
        }

        .font-family-select-menu option[value="Inter"] {
            font-family: "Inter", sans-serif;
        }

        .font-family-select-menu option[value="PT Sans"] {
            font-family: "PT Sans", sans-serif;
        }

        .font-family-select-menu option[value="Fira Sans"] {
            font-family: "Fira Sans", sans-serif;
        }

        .font-family-select-menu option[value="Work Sans"] {
            font-family: "Work Sans", sans-serif;
        }

        .font-family-select-menu option[value="Quicksand"] {
            font-family: "Quicksand", sans-serif;
        }

        .font-family-select-menu option[value="Comfortaa"] {
            font-family: "Comfortaa", sans-serif;
        }

        /* Serif Google Fonts */
        .font-family-select-menu option[value="Playfair Display"] {
            font-family: "Playfair Display", serif;
        }

        .font-family-select-menu option[value="Merriweather"] {
            font-family: "Merriweather", serif;
        }

        .font-family-select-menu option[value="Crimson Text"] {
            font-family: "Crimson Text", serif;
        }

        .font-family-select-menu option[value="Libre Baskerville"] {
            font-family: "Libre Baskerville", serif;
        }

        .font-family-select-menu option[value="Lora"] {
            font-family: "Lora", serif;
        }

        .font-family-select-menu option[value="PT Serif"] {
            font-family: "PT Serif", serif;
        }

        .font-family-select-menu option[value="Cormorant Garamond"] {
            font-family: "Cormorant Garamond", serif;
        }

        .font-family-select-menu option[value="Vollkorn"] {
            font-family: "Vollkorn", serif;
        }

        /* Display Google Fonts */
        .font-family-select-menu option[value="Oswald"] {
            font-family: "Oswald", sans-serif;
        }

        .font-family-select-menu option[value="Righteous"] {
            font-family: "Righteous", sans-serif;
        }

        .font-family-select-menu option[value="Bangers"] {
            font-family: "Bangers", cursive;
        }

        .font-family-select-menu option[value="Fredoka One"] {
            font-family: "Fredoka One", cursive;
        }

        .font-family-select-menu option[value="Bebas Neue"] {
            font-family: "Bebas Neue", cursive;
        }

        .font-family-select-menu option[value="Anton"] {
            font-family: "Anton", sans-serif;
        }

        .font-family-select-menu option[value="Fjalla One"] {
            font-family: "Fjalla One", sans-serif;
        }

        .font-family-select-menu option[value="Russo One"] {
            font-family: "Russo One", sans-serif;
        }

        /* Script/Handwriting Google Fonts */
        .font-family-select-menu option[value="Dancing Script"] {
            font-family: "Dancing Script", cursive;
        }

        .font-family-select-menu option[value="Pacifico"] {
            font-family: "Pacifico", cursive;
        }

        .font-family-select-menu option[value="Lobster"] {
            font-family: "Lobster", cursive;
        }

        .font-family-select-menu option[value="Great Vibes"] {
            font-family: "Great Vibes", cursive;
        }

        .font-family-select-menu option[value="Satisfy"] {
            font-family: "Satisfy", cursive;
        }

        .font-family-select-menu option[value="Kaushan Script"] {
            font-family: "Kaushan Script", cursive;
        }

        .font-family-select-menu option[value="Caveat"] {
            font-family: "Caveat", cursive;
        }

        .font-family-select-menu option[value="Indie Flower"] {
            font-family: "Indie Flower", cursive;
        }

        .font-family-select-menu option[value="Amatic SC"] {
            font-family: "Amatic SC", cursive;
        }

        .font-family-select-menu option[value="Shadows Into Light"] {
            font-family: "Shadows Into Light", cursive;
        }

        .font-family-select-menu option[value="Permanent Marker"] {
            font-family: "Permanent Marker", cursive;
        }

        /* Monospace Google Fonts */
        .font-family-select-menu option[value="Space Mono"] {
            font-family: "Space Mono", monospace;
        }

        .font-family-select-menu option[value="JetBrains Mono"] {
            font-family: "JetBrains Mono", monospace;
        }

        .font-family-select-menu option[value="Fira Code"] {
            font-family: "Fira Code", monospace;
        }

        .font-family-select-menu option[value="Source Code Pro"] {
            font-family: "Source Code Pro", monospace;
        }

        .font-family-select-menu option[value="Roboto Mono"] {
            font-family: "Roboto Mono", monospace;
        }

        .font-family-select-menu option[value="Ubuntu Mono"] {
            font-family: "Ubuntu Mono", monospace;
        }

        .font-family-select-menu option[value="Inconsolata"] {
            font-family: "Inconsolata", monospace;
        }

        /* Futuristic Google Fonts */
        .font-family-select-menu option[value="Orbitron"] {
            font-family: "Orbitron", sans-serif;
        }

        .font-family-select-menu option[value="Exo 2"] {
            font-family: "Exo 2", sans-serif;
        }

        .font-family-select-menu option[value="Audiowide"] {
            font-family: "Audiowide", cursive;
        }

        .font-family-select-menu option[value="Electrolize"] {
            font-family: "Electrolize", sans-serif;
        }

        .font-family-select-menu option[value="Syncopate"] {
            font-family: "Syncopate", sans-serif;
        }

        .font-family-select-menu optgroup {
            font-weight: bold;
            color: #666;
            background-color: #f8f9fa;
            font-family: Arial, sans-serif;
            padding: 4px 8px;
        }

        .font-size-select-menu {
            display: none;
            width: 60px;
            padding: 4px 8px;
            border: none;
            border-right: 1px solid #e5e7eb;
            background-color: #f0f0f0;
            font-size: 14px;
            position: absolute;
            margin-left: 100px;
            margin-top: -20px;
            list-style-type: none;
        }

        .font-size-select-menu li {
            font-size: 14px;
        }

        .file-navbar-8:hover .font-size-select-menu {
            display: block;
            position: absolute;
        }

        #text-area-container {
            margin-left: 220px;
            padding: 10px;
        }

        .sidebar {
            float: left;
            width: 200px;
            background: #f8f9fa;
            padding: 10px;
            border-right: 1px solid #ccc;
            height: 500px;
            margin-top: -480px;
            border-radius: 24px;

        }

        #fileList li {
            margin-bottom: 5px;
        }

        #fileList li:hover {
            text-decoration: underline;
        }

        /* File tab styles */
        #fileTabs {
            display: flex;
            gap: 5px;
            padding: 8px 10px;
            background: #eee;
            border-bottom: 1px solid #ccc;
            overflow-x: auto;
        }

        .tab {
            padding: 5px 10px;
            border: 1px solid #ccc;
            border-bottom: none;
            background: #ddd;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            border-radius: 5px 5px 0 0;
        }

        .tab.active {
            background: white;
            font-weight: bold;
        }

        .tab button {
            border: none;
            background: none;
            color: red;
            cursor: pointer;
            font-size: 14px;
        }

        .text-area-container {
            padding: 10px;
        }

        /* for text color and background color  */
        .color-picker-palette {
            position: relative;
            display: inline-block;
            /* margin: 10px; */
        }

        .color-picker-dropdown {
            display: none;
            position: absolute;
            top: 30px;
            left: 0;
            z-index: 999;
            background: #fff;
            border: 1px solid #ccc;
            padding: 10px;
            width: 250px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .color-picker-dropdown.show {
            display: block;
        }

        .color-section {
            margin-bottom: 10px;
        }

        .color-section-title {
            font-size: 12px;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .color-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .color-grid.large .gradient-option {
            width: 50px;
            height: 30px;
            border-radius: 4px;
            cursor: pointer;
        }

        .color-option,
        .gradient-option {
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
            cursor: pointer;
            border-radius: 4px;
        }

        .recent-colors {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
        }

        .color-input-group {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-top: 5px;
        }

        .custom-color-input {
            margin-top: 5px;
        }

        .opacity-slider {
            width: 100%;
        }

        .color-preview {
            height: 20px;
            border: 1px solid #ccc;
            margin-top: 5px;
        }

        /* #textArea {
            padding: 20px;
            border: 1px solid #ccc;
            margin-top: 20px;
            min-height: 100px;
        }  */
    </style>
</head>

<body>
    <div class="editor-container">
        <!-- Navbar -->
        <div class="navbar">
            <ul>

                <li onclick="MenuClick()" class="file-navbar">File
                    <ul class="file-menu">
                        <li onclick="createNewFile()">New file <i class="bi bi-file"></i></li>
                        <li id="openBtn" onclick="openFile()">Open <i class="bi bi-folder2-open"></i></li>
                        <li onclick="saveAsTextFile()">Save <i class="bi bi-floppy"></i></li>
                        <li onclick="saveAs()">Save As <i class="bi bi-floppy2-fill"></i></li>
                    </ul>
                </li>

                <li onclick="MenuClick2()" class="file-navbar-2">Edit
                    <ul class="file-menu">
                        <li>Select all</li>
                        <li id="undoBtn" onclick="handleUndo()"><i class="bi bi-arrow-90deg-left">Undo</i></li>
                        <li id="redoBtn" onclick="handleRedo()"><i class="bi bi-arrow-90deg-right">Redo</i></li>
                    </ul>
                </li>
                <li onclick="MenuClick3()" class="file-navbar-3">
                    Insert
                    <ul class="file-menu">
                        <li><button onclick="insertHorizontalLine()"
                                style="border: none;background-color: white;width:100%;" class="Horizontal">Horizontal
                                line <i class="bi bi-dash-lg"></i></button></li>
                        <li>Pdf <i class="bi bi-filetype-pdf"></i></li>
                        <li>Ms Word Docx <i class="bi bi-file-earmark-fill"></i></li>
                        <li>Ppt <i class="bi bi-filetype-pptx"></i></li>
                        <li>MS Excel <i class="bi bi-file-earmark-excel"></i></li>
                        <li>Image <i class="bi bi-images"></i></li>
                    </ul>
                </li>
                <li onclick="MenuClick4()" class="file-navbar-4">View</li>
                <li onclick="MenuClick5()" class="file-navbar-5">Format
                    <ul class="file-menu">
                        <li id="boldBtn" onclick="toggleFormat('bold')" title="Bold">Bold <strong>B</strong></li>
                        <li id="italicBtn" onclick="toggleFormat('italic')" title="Italic">Italic <i>I</i></li>
                        <li id="underlineBtn" onclick="toggleFormat('underline')" title="Underline">Underline
                            <U>U</U>
                        </li>
                        <button onclick="applyFormat('sub')"
                            style="border:none;background-color:white;font-size:15px;text-align: center;padding-right: 28px;border-bottom: 1px solid #d2d4d6;padding-top: 5px;width: 100%;border-radius: 4px;">Subscript
                            <sub>SUB</sub></button>
                        <button onclick="applyFormat('sup')"
                            style="border:none;background-color:white;font-size:15px;text-align: center;padding-right: 15px;border-bottom: 1px solid #d2d4d6;padding-top: 5px;width: 100%;border-radius: 4px;padding-bottom: 4px;">Superscript
                            <sup>SUP</sup></button>
                        <button onclick="wrapWithAngleBrackets()"
                            style="border:none;background-color:white;font-size:15px;text-align: center;padding-right: 57px;border-bottom: 1px solid #d2d4d6;padding-top: 5px;width: 100%;border-radius: 4px;padding-bottom: 4px;">
                            Code <>
                        </button>
                        <li class="file-navbar-6">Heading
                            <ul class="sub-menu">
                                <li><button onclick="headingElement('h1')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <h1>H1</h1>

                                    </button>
                                </li>
                                <li>
                                    <button onclick="headingElement('h2')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <H2>H2</H2>
                                    </button>
                                </li>
                                <li>
                                    <button onclick="headingElement('h3')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <h3>H3</h3>
                                    </button>
                                </li>
                                <li>
                                    <button onclick="headingElement('h4')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <h4>H4</h4>
                                    </button>
                                </li>
                                <li>
                                    <button onclick="headingElement('h5')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <h5>H5</h5>
                                    </button>
                                </li>
                                <li>
                                    <button onclick="headingElement('h6')"
                                        style="border:none;background-color: #f0f0f0;">
                                        <h6>H6</h6>
                                    </button>
                                </li>
                            </ul>
                        </li>
                    </ul>
        </div>

        <!-- Toolbar -->
        <div class="toolbar">
            <!-- Left Section -->
            <div class="toolbar-left">
                <!-- Undo/Redo -->
                <button class="toolbar-btn" id="undoBtn" onclick="handleUndo()" title="Undo">
                    <i class="bi bi-arrow-90deg-left"></i>
                </button>
                <button class="toolbar-btn" id="redoBtn" onclick="handleRedo()" title="Redo">
                    <i class="bi bi-arrow-90deg-right"></i>
                </button>

                <!-- Font Controls -->
                <select class="font-family-select" id="fontFamily" onchange="handleFontFamilyChange()">
                    <optgroup label="System Fonts">
                        <option value="Arial">Arial</option>
                        <option value="Helvetica">Helvetica</option>
                        <option value="Times New Roman">Times New Roman</option>
                        <option value="Times">Times</option>
                        <option value="Courier New">Courier New</option>
                        <option value="Courier">Courier</option>
                        <option value="Verdana">Verdana</option>
                        <option value="Georgia">Georgia</option>
                        <option value="Palatino">Palatino</option>
                        <option value="Garamond">Garamond</option>
                        <option value="Bookman">Bookman</option>
                        <option value="Comic Sans MS">Comic Sans MS</option>
                        <option value="Trebuchet MS">Trebuchet MS</option>
                        <option value="Arial Black">Arial Black</option>
                        <option value="Impact">Impact</option>
                    </optgroup>

                    <optgroup label="Sans-Serif">
                        <option value="Roboto">Roboto</option>
                        <option value="Open Sans">Open Sans</option>
                        <option value="Lato">Lato</option>
                        <option value="Montserrat">Montserrat</option>
                        <option value="Source Sans Pro">Source Sans Pro</option>
                        <option value="Ubuntu">Ubuntu</option>
                        <option value="Nunito">Nunito</option>
                        <option value="Raleway">Raleway</option>
                        <option value="Poppins">Poppins</option>
                        <option value="Inter">Inter</option>
                        <option value="PT Sans">PT Sans</option>
                        <option value="Fira Sans">Fira Sans</option>
                        <option value="Work Sans">Work Sans</option>
                        <option value="Quicksand">Quicksand</option>
                        <option value="Comfortaa">Comfortaa</option>
                    </optgroup>

                    <optgroup label="Serif">
                        <option value="Playfair Display">Playfair Display</option>
                        <option value="Merriweather">Merriweather</option>
                        <option value="Crimson Text">Crimson Text</option>
                        <option value="Libre Baskerville">Libre Baskerville</option>
                        <option value="Lora">Lora</option>
                        <option value="PT Serif">PT Serif</option>
                        <option value="Cormorant Garamond">Cormorant Garamond</option>
                        <option value="Vollkorn">Vollkorn</option>
                    </optgroup>

                    <optgroup label="Display">
                        <option value="Oswald">Oswald</option>
                        <option value="Righteous">Righteous</option>
                        <option value="Bangers">Bangers</option>
                        <option value="Fredoka One">Fredoka One</option>
                        <option value="Bebas Neue">Bebas Neue</option>
                        <option value="Anton">Anton</option>
                        <option value="Fjalla One">Fjalla One</option>
                        <option value="Russo One">Russo One</option>
                    </optgroup>

                    <optgroup label="Script & Handwriting">
                        <option value="Dancing Script">Dancing Script</option>
                        <option value="Pacifico">Pacifico</option>
                        <option value="Lobster">Lobster</option>
                        <option value="Great Vibes">Great Vibes</option>
                        <option value="Satisfy">Satisfy</option>
                        <option value="Kaushan Script">Kaushan Script</option>
                        <option value="Caveat">Caveat</option>
                        <option value="Indie Flower">Indie Flower</option>
                        <option value="Amatic SC">Amatic SC</option>
                        <option value="Shadows Into Light">Shadows Into Light</option>
                        <option value="Permanent Marker">Permanent Marker</option>
                    </optgroup>

                    <optgroup label="Monospace">
                        <option value="Space Mono">Space Mono</option>
                        <option value="JetBrains Mono">JetBrains Mono</option>
                        <option value="Fira Code">Fira Code</option>
                        <option value="Source Code Pro">Source Code Pro</option>
                        <option value="Roboto Mono">Roboto Mono</option>
                        <option value="Ubuntu Mono">Ubuntu Mono</option>
                        <option value="Inconsolata">Inconsolata</option>
                    </optgroup>

                    <optgroup label="Futuristic">
                        <option value="Orbitron">Orbitron</option>
                        <option value="Exo 2">Exo 2</option>
                        <option value="Audiowide">Audiowide</option>
                        <option value="Electrolize">Electrolize</option>
                        <option value="Syncopate">Syncopate</option>
                    </optgroup>
                </select>

                <select class="font-size-select" id="fontSize" onchange="handleFontSizeChange()">
                    <option value="8">8</option>
                    <option value="9">9</option>
                    <option value="10">10</option>
                    <option value="11">11</option>
                    <option value="12">12</option>
                    <option value="14" selected>14</option>
                    <option value="16">16</option>
                    <option value="18">18</option>
                    <option value="20">20</option>
                    <option value="22">22</option>
                    <option value="24">24</option>
                    <option value="26">26</option>
                    <option value="28">28</option>
                    <option value="32">32</option>
                    <option value="36">36</option>
                    <option value="48">48</option>
                    <option value="72">72</option>
                </select>

                <!-- Color Controls -->
                <div class="color-picker-palette" id="textPickerContainer"
                    style="border-right: 1px solid #e5e7eb;height:36px;width:40px;text-align:center;padding-top:5px;">
                    <button id="textColorBtn" style="border: none;"> <i class="bi bi-fonts" id="textColorIcon"
                            style="color: #000000;"></i></button>
                    <div class="color-picker-dropdown" id="textColorPicker"></div>
                </div>

                <div class="color-picker-palette" id="backgroundPickerContainer" style="border-right: 1px solid #e5e7eb;height:36px;width:40px;text-align:center;padding-top:5px;">
                    <button id="backgroundColorBtn" style="border: none;"><i class="bi bi-paint-bucket"></i></button>
                    <div class="color-picker-dropdown" id="backgroundColorPicker" style="margin-top: 10px;"></div>
                </div>
                <div>
                    <button onclick="insertSpacing()" style="border: none;margin-right: 10px;margin-left: 10px;"><i class="bi bi-indent" style="font-size: 15px;"></i></button>
                </div>

            </div>
            <div class="submit-button">
                <button onclick="submitText()" id="submitBtn">Upload</button>
            </div>
            <div id="successAlert" style="
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            background-color: #d4edda;
            color: #155724;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            z-index: 9999;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            ">
                 Successfully updated
            </div>

            <div class="toolbar-right">
                <!-- Text Formatting -->
                <button class="toolbar-btn" id="boldBtn" onclick="toggleFormat('bold')"
                    title="Bold"><strong>B</strong></button>
                <button class="toolbar-btn" id="italicBtn" onclick="toggleFormat('italic')"
                    title="Italic"><em>I</em></button>
                <button class="toolbar-btn" id="underlineBtn" onclick="toggleFormat('underline')"
                    title="Underline"><u>U</u></button>

                <!-- Text Alignment -->
                <button class="toolbar-btn active" id="alignLeftBtn" onclick="setAlignment('left')" title="Align Left">
                    <i class="bi bi-text-left"></i>
                </button>
                <button class="toolbar-btn" id="alignCenterBtn" onclick="setAlignment('center')" title="Align Center">
                    <i class="bi bi-text-center"></i>
                </button>
                <button class="toolbar-btn" id="alignRightBtn" onclick="setAlignment('right')" title="Align Right">
                    <i class="bi bi-text-right"></i>
                </button>
                <button class="toolbar-btn" id="alignJustifyBtn" onclick="setAlignment('justify')" title="Justify">
                    <i class="bi bi-justify"></i>
                </button>
            </div>
        </div>

        <!-- Text Area -->
        <!-- <div class="text-area-container">
            <textarea class="text-area" id="textArea" contenteditable="true" placeholder="Start typing here..."
                ></textarea>
        </div> -->
        <!-- Tabs for recently opened files -->
        <div id="fileTabs"></div>

        <!-- Content Editable Div -->
        <div class="text-area-container">
            <h3 id="currentFileName">No file opened</h3>
            <div class="text-area" id="textArea" contenteditable="true">Start typing here...</div>

            <!-- Status Bar -->
            <div class="status-bar">
                <span id="charCount">Characters: 0</span>
                <span id="wordCount">Words: 0</span>
            </div>
        </div>
    </div>
    <input type="file" id="fileInput" style="display: none;" />

    <script>
        let fileHandles = {}; // To store FileSystemFileHandle for each file

        let editorState = {
            content: '',
            history: [''],
            historyIndex: -1,
            fontSize: '14px',
            fontFamily: 'Arial',
            textColor: '#000000',
            backgroundColor: '#ffffff',
            isBold: false,
            isItalic: false,
            isUnderline: false,
            textAlign: 'left'
        };

        // Color Palettes
        const standardColors = ['#000000', '#434343', '#666666', '#999999', '#b7b7b7', '#cccccc', '#d9d9d9', '#efefef',
            '#f3f3f3', '#ffffff', '#980000', '#ff0000', '#ff9900', '#ffff00', '#00ff00', '#00ffff',
            '#4a86e8', '#0000ff', '#9900ff', '#ff00ff', '#e6b8af', '#f4cccc', '#fce5cd', '#fff2cc',
            '#d9ead3', '#d0e0e3', '#c9daf8', '#cfe2f3', '#d9d2e9', '#ead1dc'];

        const backgroundColors = ['#ffffff', '#f8f9fa', '#f1f3f4', '#e8eaed', '#dadce0', '#bdc1c6', '#9aa0a6', '#5f6368',
            '#3c4043', '#202124', '#fef7e0', '#fce8e6', '#fde7f3', '#e8f0fe', '#e6f4ea', '#fff3e0',
            '#f3e5f5', '#e1f5fe', '#e0f2f1', '#fff8e1'];

        const gradientColors = [
            'linear-gradient(45deg, #ff6b6b, #feca57)',
            'linear-gradient(45deg, #48cae4, #023e8a)',
            'linear-gradient(45deg, #06ffa5, #0077b6)',
            'linear-gradient(45deg, #f72585, #b5179e)',
            'linear-gradient(45deg, #f77f00, #fcbf49)',
            'linear-gradient(45deg, #7209b7, #560bad)',
            'linear-gradient(45deg, #f72585, #4361ee)',
            'linear-gradient(45deg, #06ffa5, #7209b7)'
        ];
        // Recent colors storage
        let recentTextColors = JSON.parse(localStorage.getItem('recentTextColors') || '[]');
        let recentBackgroundColors = JSON.parse(localStorage.getItem('recentBackgroundColors') || '[]');
        let activePicker = null;
        let backgroundOpacity = 1; // Default opacity for background
        let savedRange = null; // To save the selection range
        // Initialize editor
        function initEditor() {
            updateTextAreaStyle();
            updateButtonStates();
            updateStats();
        }
        // Close color pickers when clicking outside
        const textarea = document.getElementById('textArea');
        function showColorPicker(type) {
            document.querySelectorAll('.color-picker-dropdown').forEach(dropdown => dropdown.classList.remove('show'));
            const dropdown = document.getElementById(`${type}ColorPicker`);
            dropdown.classList.add('show');
            if (!dropdown.hasChildNodes()) createColorPicker(`${type}ColorPicker`, type);
            // Save the current selection range
            const selection = window.getSelection();
            if (selection && selection.rangeCount > 0) {
                savedRange = selection.getRangeAt(0).cloneRange();
            }
        }
        function toggleColorPicker(type) {
            document.querySelectorAll('.color-picker-dropdown').forEach(dropdown => {
                if (!dropdown.id.includes(type)) dropdown.classList.remove('show');
            });
            const dropdown = document.getElementById(`${type}ColorPicker`);
            dropdown.classList.toggle('show');
            if (!dropdown.hasChildNodes()) createColorPicker(`${type}ColorPicker`, type);
        }


        // Create color pickers
        function createColorPicker(containerId, type) {
            const container = document.getElementById(containerId);
            const colors = type === 'text' ? standardColors : backgroundColors;
            const recentColors = type === 'text' ? recentTextColors : recentBackgroundColors;

            let html = `
      <div class="color-section"><div class="color-section-title">Standard Colors</div><div class="color-grid">`;
            colors.forEach(color => {
                html += `<div class="color-option" style="background-color: ${color}" onclick="selectColor('${type}', '${color}')"></div>`;
            });
            html += `</div></div>`;

            if (type === 'background') {
                html += `<div class="color-section"><div class="color-section-title">Gradient Backgrounds</div><div class="color-grid large">`;
                gradientColors.forEach(gradient => {
                    html += `<div class="gradient-option" style="background: ${gradient}" onclick="selectColor('${type}', '${gradient}')"></div>`;
                });
                html += `</div></div>`;
            }

            html += `<div class="color-section">
        <div class="color-section-title">Recent Colors</div>
        <div class="recent-colors">${recentColors.map(c => `<div class="color-option" style="background:${c}" onclick="selectColor('${type}', '${c}')"></div>`).join('')}</div>
      </div>
      <div class="custom-color-section">
        <div class="color-section-title">Custom Color</div>
        <input type="color" onchange="selectColor('${type}', this.value)">
        <div class="color-input-group">
          <input type="text" id="${type}Hex" placeholder="#000000" maxlength="7">
          <button onclick="applyHex('${type}')">Apply</button>
        </div>
        ${type === 'background' ? `
        <div class="color-input-group">
          <label>Opacity</label>
          <input type="range" min="0" max="100" value="100" oninput="changeOpacity('${type}', this.value)">
          <span id="${type}Opacity">100%</span>
        </div>` : ''}
      </div>`;

            container.innerHTML = html;
        }

        function selectColor(type, color) {

            // Restore the saved selection range
            const selection = window.getSelection();
            if (savedRange) {
                selection.removeAllRanges();
                selection.addRange(savedRange);
            }
            if (!selection || selection.rangeCount === 0) return;

            const range = selection.getRangeAt(0);
            if (range.collapsed) return; // No text selected

            const textArea = document.getElementById('textArea');
            if (!textArea.contains(range.commonAncestorContainer)) return;

            const span = document.createElement('span');
            if (type === 'background') {
                if (color.startsWith('linear-gradient')) {
                    span.style.backgroundImage = color;
                } else {
                    // If opacity is not 1, convert to rgba
                    if (backgroundOpacity < 1) {
                        span.style.backgroundColor = hexToRgba(color, backgroundOpacity);
                    } else {
                        span.style.backgroundColor = color;
                    }
                }
            } else {
                span.style.color = color;
            }

            updateRecent(type, color);

            span.appendChild(range.extractContents());
            range.deleteContents();
            range.insertNode(span);

            selection.removeAllRanges();
            const newRange = document.createRange();
            newRange.selectNodeContents(span);
            selection.addRange(newRange);

            const dropdown = document.getElementById(`${type}ColorPicker`);
            dropdown?.classList.remove('show');

            // Clear saved range after applying
            savedRange = null;
        }
        // Apply hex color
        function applyHex(type) {
            const val = document.getElementById(`${type}Hex`).value;
            if (/^#[0-9A-F]{6}$/i.test(val)) {
                selectColor(type, val); // Already hides the dropdown
            } else {
                alert('Invalid Hex Code');
            }
        }

        function updateRecent(type, color) {
            let list = type === 'text' ? recentTextColors : recentBackgroundColors;
            list = list.filter(c => c !== color);
            list.unshift(color);
            if (list.length > 10) list.pop();
            localStorage.setItem(type === 'text' ? 'recentTextColors' : 'recentBackgroundColors', JSON.stringify(list));
        }
        function changeOpacity(type, value) {
            document.getElementById(`${type}Opacity`).textContent = `${value}%`;
            if (type === 'background') {
                backgroundOpacity = value / 100;
            }
        }

        // Convert hex to rgba
        function hexToRgba(hex, alpha) {
            const r = parseInt(hex.slice(1, 3), 16);
            const g = parseInt(hex.slice(3, 5), 16);
            const b = parseInt(hex.slice(5, 7), 16);
            return `rgba(${r}, ${g}, ${b}, ${alpha})`;
        }
        // Close pickers on outside click
        document.addEventListener('click', e => {
            const isInsidePicker = e.target.closest('.color-picker-palette');
            if (!isInsidePicker) {
                document.querySelectorAll('.color-picker-dropdown').forEach(el => el.classList.remove('show'));
            }
        });

        const state = {
            text: { manuallyToggled: false },
            background: { manuallyToggled: false }
        };
        document.getElementById('textColorBtn').addEventListener('click', () => showColorPicker('text'));
        document.getElementById('textColorBtn').addEventListener('mouseenter', () => showColorPicker('text'));

        document.getElementById('backgroundColorBtn').addEventListener('click', () => showColorPicker('background'));
        document.getElementById('backgroundColorBtn').addEventListener('mouseenter', () => showColorPicker('background'));

        // Expose functions for inline event handlers
        window.selectColor = selectColor;
        window.applyHex = applyHex;
        window.changeOpacity = changeOpacity;

        function saveToHistory() {
            const content = document.getElementById('textArea').innerHTML;
            if (editorState.history[editorState.historyIndex] !== content) {
                editorState.historyIndex++;
                editorState.history = editorState.history.slice(0, editorState.historyIndex); // remove redo steps
                editorState.history.push(content);
            }
        }

        // Undo function
        function handleUndo() {
            if (editorState.historyIndex > 0) {
                editorState.historyIndex--;
                const previousContent = editorState.history[editorState.historyIndex];
                document.getElementById('textArea').innerHTML = previousContent;
            }
        }

        // (Optional) Redo function
        function handleRedo() {
            if (editorState.historyIndex < editorState.history.length - 1) {
                editorState.historyIndex++;
                const nextContent = editorState.history[editorState.historyIndex];
                document.getElementById('textArea').innerHTML = nextContent;
            }
        }

        // Auto save on keyup/input
        document.getElementById('textArea').addEventListener('input', saveToHistory);

        // Initialize first state
        saveToHistory();

        // // History management
        // function addToHistory(content) {
        //     const newHistory = editorState.history.slice(0, editorState.historyIndex + 1);
        //     newHistory.push(content);
        //     editorState.history = newHistory;
        //     editorState.historyIndex = newHistory.length - 1;
        // }

        // // Undo functionality
        // function handleUndo() {
        //     if (editorState.historyIndex > 0) {
        //         editorState.historyIndex--;
        //         editorState.content = editorState.history[editorState.historyIndex];
        //         document.getElementById('textArea').value = editorState.content;
        //         updateStats();
        //         updateButtonStates();
        //     }
        // }

        // // Redo functionality
        // function handleRedo() {
        //     if (editorState.historyIndex < editorState.history.length - 1) {
        //         editorState.historyIndex++;
        //         editorState.content = editorState.history[editorState.historyIndex];
        //         document.getElementById('textArea').value = editorState.content;
        //         updateStats();
        //         updateButtonStates();
        //     }
        // }



        // Font family change
        // function handleFontFamilyChange() {
        //     const fontFamily = document.getElementById('fontFamily').value;
        //     editorState.fontFamily = fontFamily;
        //     updateTextAreaStyle();
        // } 

        function handleFontFamilyChange() {
            const fontFamily = document.getElementById('fontFamily').value;
            const selection = window.getSelection();

            if (!selection.rangeCount) return;

            const range = selection.getRangeAt(0);

            // If text is selected
            if (!selection.isCollapsed) {
                const span = document.createElement("span");
                span.style.fontFamily = fontFamily;

                const content = range.extractContents(); // cut selected text
                span.appendChild(content);               // wrap in span
                range.deleteContents();                  // delete original
                range.insertNode(span);                  // insert styled version

                // Optional: reselect the new span
                const newRange = document.createRange();
                newRange.selectNodeContents(span);
                selection.removeAllRanges();
                selection.addRange(newRange);
            } else {
                // Cursor only  insert span for future text
                const span = document.createElement("span");
                span.style.fontFamily = fontFamily;
                span.innerHTML = "\u200B"; // zero-width space

                range.insertNode(span);

                // Move cursor inside span after the ZWSP
                const newRange = document.createRange();
                newRange.setStart(span.firstChild, 1);
                newRange.setEnd(span.firstChild, 1);
                selection.removeAllRanges();
                selection.addRange(newRange);
            }
        }
        // Font size change

        function handleFontSizeChange() {
            const fontSize = document.getElementById('fontSize').value + "px";
            const selection = window.getSelection();

            if (!selection.rangeCount) return;

            const range = selection.getRangeAt(0);

            // If there's selected text
            if (!selection.isCollapsed) {
                const span = document.createElement("span");
                span.style.fontSize = fontSize;

                const content = range.extractContents();
                span.appendChild(content);
                range.deleteContents();
                range.insertNode(span);

                // Move cursor after the new span
                range.setStartAfter(span);
                selection.removeAllRanges();
                selection.addRange(range);
            } else {
                // No selected text, insert span for future typing
                const span = document.createElement("span");
                span.style.fontSize = fontSize;
                span.innerHTML = "\u200B"; // zero-width space

                range.insertNode(span);

                // Move cursor inside the new span
                range.setStart(span.firstChild, 1);
                range.setEnd(span.firstChild, 1);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        }
        // Font size change
        // function handleFontSizeChange() {
        //     const fontSize = document.getElementById('fontSize').value;
        //     editorState.fontSize = fontSize;
        //     updateTextAreaStyle();
        // }

        // Toggle text formatting
        function toggleFormat(format) {
            switch (format) {
                case 'bold':
                    editorState.isBold = !editorState.isBold;
                    break;
                case 'italic':
                    editorState.isItalic = !editorState.isItalic;
                    break;
                case 'underline':
                    editorState.isUnderline = !editorState.isUnderline;
                    break;
            }

            // Apply formatting using execCommand
            document.execCommand(format, false, null);

            updateButtonStates();
        }


        function toggleFormat(format) {
            document.execCommand(format, false, null);

            switch (format) {
                case 'bold':
                    editorState.isBold = !editorState.isBold;
                    break;
                case 'italic':
                    editorState.isItalic = !editorState.isItalic;
                    break;
                case 'underline':
                    editorState.isUnderline = !editorState.isUnderline;
                    break;
            }

            updateButtonStates();
        }
        //showing file bar
        function MenuClick() {
            const menu = document.getElementsByClassName('file-menu')[0];
            if (menu.style.display == "block") {
                menu.style.display = "none";
            }
            else {
                menu.style.display = "block";
            }
        }
        //showing edit bar
        function MenuClick2() {
            const menu = document.getElementsByClassName('file-menu')[1];
            if (menu.style.display == "block") {
                menu.style.display = "none";
            }
            else {
                menu.style.display = "block";
            }
        }
        // showing insert bar
        function MenuClick3() {
            const menu = document.getElementsByClassName('file-menu')[2];
            if (menu.style.display == "block") {
                menu.style.display = "none";
            }
            else {
                menu.style.display = "block";
            }
        }
        function MenuClick5() {
            const menu = document.getElementsByClassName('file-menu')[3];
            if (menu.style.display == "block") {
                menu.style.display = "none";
            }
            else {
                menu.style.display = "block";
            }
        }
        function showfont() {
            const show = document.getElementsByClassName('fomenu')[0];
            if (show.style.display == "none") {
                show.style.display = "block"
            }
            else {
                show.style.display = "none"
            }
        }

        //for upload
        function submitText() {
            // const text = document.getElementById("textArea").value;
            // console.log(text);
            const text = document.getElementById("textArea").innerHTML;
            console.log(text);
            const alertBox = document.getElementById("successAlert");
            alertBox.style.display = "block"

            // Step 3: Auto-hide after 3 seconds
            setTimeout(() => {
                alertBox.style.display = "none"
            }, 3000);
        }

        //for font in menu 
        // function textsize() {
        //     const font = document.getElementsByClassName('font-size-select-menu')[0];
        //     if (font.style.display == "none") {
        //         font.style.display = "block"
        //     }
        //     else {
        //         font.style.display = "none"
        //     }
        // }

        // Set text alignment
        function setAlignment(alignment) {
            editorState.textAlign = alignment;
            document.execCommand('justify' + alignment.charAt(0).toUpperCase() + alignment.slice(1), false, null);
            updateButtonStates();
        }

        // Update textarea styling
        function updateTextAreaStyle() {
            const textArea = document.getElementById('textArea');
            textArea.style.fontSize = editorState.fontSize + 'px';
            textArea.style.fontFamily = editorState.fontFamily;
            textArea.style.color = editorState.textColor;

            // Handle gradient backgrounds
            if (editorState.backgroundColor.includes('gradient')) {
                textArea.style.background = editorState.backgroundColor;
                textArea.style.backgroundColor = 'transparent';
            } else {
                textArea.style.backgroundColor = editorState.backgroundColor;
                textArea.style.background = 'none';
            }

            textArea.style.fontWeight = editorState.isBold ? 'bold' : 'normal';
            textArea.style.fontStyle = editorState.isItalic ? 'italic' : 'normal';
            textArea.style.textDecoration = editorState.isUnderline ? 'underline' : 'none';
            textArea.style.textAlign = editorState.textAlign;
        }

        // Update button states
        function updateButtonStates() {
            // === Remove 'active' class from all formatting buttons ===
            ['boldBtn', 'italicBtn', 'underlineBtn'].forEach(id => {
                document.getElementById(id).classList.remove('active');
            });

            // === Add 'active' class for formatting based on state ===
            if (editorState.isBold) {
                document.getElementById('boldBtn').classList.add('active');
            }
            if (editorState.isItalic) {
                document.getElementById('italicBtn').classList.add('active');
            }
            if (editorState.isUnderline) {
                document.getElementById('underlineBtn').classList.add('active');
            }

            // === Remove 'active' class from all alignment buttons ===
            ['Left', 'Center', 'Right', 'Justify'].forEach(align => {
                document.getElementById('align' + align + 'Btn').classList.remove('active');
            });

            // === Add 'active' class to current alignment button ===
            const currentAlign = editorState.textAlign.charAt(0).toUpperCase() + editorState.textAlign.slice(1);
            const alignBtn = document.getElementById('align' + currentAlign + 'Btn');
            if (alignBtn) {
                alignBtn.classList.add('active');
            }
        }



        // Update character and word count
        function updateStats() {
            const content = editorState.content;
            const charCount = content.length;
            const wordCount = content.trim() ? content.trim().split(/\s+/).length : 0;

            document.getElementById('charCount').textContent = `Characters: ${charCount}`;
            document.getElementById('wordCount').textContent = `Words: ${wordCount}`;
        }
        const textArea = document.getElementById("textArea");

        textArea.addEventListener("input", () => {
            editorState.content = textArea.innerText; // or textArea.innerHTML if needed
            updateStats();
        });

        function updateStatsFromHTML() {
            const htmlContent = document.getElementById("textArea").innerHTML;
            const textContent = document.getElementById("textArea").textContent || "";

            const charCount = textContent.length;
            const wordCount = textContent.trim() ? textContent.trim().split(/\s+/).length : 0;

            document.getElementById('charCount').textContent = `Characters: ${charCount}`;
            document.getElementById('wordCount').textContent = `Words: ${wordCount}`;
        }


        // Keyboard shortcuts
        document.addEventListener('keydown', function (e) {
            if (e.ctrlKey || e.metaKey) {
                switch (e.key) {
                    case 'z':
                        e.preventDefault();
                        if (e.shiftKey) {
                            handleRedo();
                        } else {
                            handleUndo();
                        }
                        break;
                    case 'y':
                        e.preventDefault();
                        handleRedo();
                        break;
                    case 'b':
                        e.preventDefault();
                        toggleFormat('bold');
                        break;
                    case 'i':
                        e.preventDefault();
                        toggleFormat('italic');
                        break;
                    case 'u':
                        e.preventDefault();
                        toggleFormat('underline');
                        break;
                }
            }
        });

        // Initialize when page loads
        window.addEventListener('load', initEditor);

        function insertHorizontalLine() {
            const editor = document.getElementById('textArea');

            // Create elements
            const br = document.createElement("br");
            const hr = document.createElement("hr");

            // Append <br> and <hr> at the end
            editor.appendChild(br.cloneNode());
            editor.appendChild(hr);
            editor.appendChild(br.cloneNode());

            // Scroll to bottom after inserting line
            editor.scrollTop = editor.scrollHeight;
        }
        function MenuClick3() {
            const menu = document.querySelector('.file-navbar-3');
            menu.classList.toggle('show-menu');
        }

        function insertHorizontalLine() {
            const editor = document.getElementById('textArea');

            // Create HR and spacing
            const br = document.createElement("br");
            const hr = document.createElement("hr");

            editor.appendChild(br.cloneNode());
            editor.appendChild(hr);
            editor.appendChild(br.cloneNode());

            editor.scrollTop = editor.scrollHeight;
        }
        let files = {};
        let currentFile = null;
        let fileCounter = 1;
        let openedFiles = [];
        let fileContents = {};

        function createNewFile() {
            // Save current file if any
            if (currentFile !== null) {
                files[currentFile] = document.getElementById("textArea").innerHTML;
            }

            const fileName = `Untitled-${fileCounter++}`;
            files[fileName] = ""; // Set blank content
            currentFile = fileName;

            if (!openedFiles.includes(fileName)) {
                openedFiles.push(fileName);
            }

            document.getElementById("currentFileName").innerText = fileName;
            document.getElementById("textArea").innerHTML = ""; // CLEAR TEXTAREA
            updateFileTabs();
        }

        function openFile(fileName) {
            if (currentFile !== null) {
                files[currentFile] = document.getElementById("textArea").innerHTML;
            }

            currentFile = fileName;
            document.getElementById("currentFileName").innerText = fileName;
            document.getElementById("textArea").innerHTML = files[fileName];

            if (!openedFiles.includes(fileName)) {
                openedFiles.push(fileName);
            }

            updateFileTabs();
        }

        // function updateFileTabs() {
        //     const tabBar = document.getElementById("fileTabs");
        //     tabBar.innerHTML = "";

        //     openedFiles.forEach(fileName => {
        //         const tab = document.createElement("div");
        //         tab.className = "tab" + (fileName === currentFile ? " active" : "");

        //         const nameSpan = document.createElement("span");
        //         nameSpan.textContent = fileName;
        //         nameSpan.onclick = () => openFile(fileName);

        //         const closeBtn = document.createElement("button");
        //         closeBtn.textContent = "x";
        //         closeBtn.onclick = (e) => {
        //             e.stopPropagation();
        //             const index = openedFiles.indexOf(fileName);
        //             if (index !== -1) openedFiles.splice(index, 1);
        //             updateFileTabs();

        //             if (currentFile === fileName) {
        //                 document.getElementById("currentFileName").innerText = "No file opened";
        //                 document.getElementById("textArea").innerHTML = "";
        //                 currentFile = null;
        //             }
        //         };

        //         tab.appendChild(nameSpan);
        //         tab.appendChild(closeBtn);
        //         tabBar.appendChild(tab);
        //     });
        // }

        //modified
        function updateFileTabs() {
            const tabBar = document.getElementById("fileTabs");
            tabBar.innerHTML = "";

            openedFiles.forEach(fileName => {
                const tab = document.createElement("div");
                tab.className = "tab" + (fileName === currentFile ? " active" : "");

                const nameSpan = document.createElement("span");
                nameSpan.textContent = fileName;
                nameSpan.style.cursor = "pointer";
                nameSpan.onclick = () => openFile(fileName); //  Load file when tab clicked

                const closeBtn = document.createElement("button");
                closeBtn.textContent = "";
                closeBtn.title = "Close file";
                closeBtn.style.marginLeft = "6px";
                closeBtn.style.border = "none";
                closeBtn.style.background = "transparent";
                closeBtn.style.color = "red";
                closeBtn.style.cursor = "pointer";
                closeBtn.style.fontSize = "16px";
                closeBtn.onclick = (e) => {
                    e.stopPropagation();
                    const index = openedFiles.indexOf(fileName);
                    if (index !== -1) {
                        openedFiles.splice(index, 1);
                        delete fileContents[fileName];
                    }

                    // If the closed file was active, switch to last file or clear
                    if (currentFile === fileName) {
                        currentFile = openedFiles[openedFiles.length - 1] || null;
                        if (currentFile) {
                            const newContent = fileContents[currentFile];
                            document.getElementById("currentFileName").textContent = currentFile;
                            document.getElementById("textArea").innerHTML = marked.parse(newContent);
                        } else {
                            document.getElementById("currentFileName").textContent = "No file opened";
                            document.getElementById("textArea").innerHTML = "";
                        }
                    }

                    updateFileTabs();
                };

                tab.style.display = "flex";
                tab.style.alignItems = "center";
                tab.style.gap = "4px";

                tab.appendChild(nameSpan);
                tab.appendChild(closeBtn);
                tabBar.appendChild(tab);
            });
        }


        // Auto-save while typing
        document.getElementById("textArea").addEventListener("input", () => {
            if (currentFile !== null) {
                files[currentFile] = document.getElementById("textArea").innerHTML;
            }
        });

        // Auto-create first file on load
        createNewFile();
        //for subscript and superscript
        function applyFormat(tag) {
            const editor = document.getElementById("textArea");
            const selection = window.getSelection();

            if (!selection.rangeCount) return;

            const range = selection.getRangeAt(0);
            const selectedText = selection.toString();

            // Walk up to check if selection is inside the editor
            let node = range.startContainer;
            let insideEditor = false;
            while (node) {
                if (node === editor) {
                    insideEditor = true;
                    break;
                }
                node = node.parentNode;
            }

            if (!insideEditor) {
                alert("Please select text inside the editor.");
                return;
            }

            if (selectedText.trim() === "") return;

            const wrapper = document.createElement(tag);
            wrapper.textContent = selectedText;

            range.deleteContents();
            range.insertNode(wrapper);

            const newRange = document.createRange();
            newRange.setStartAfter(wrapper);
            newRange.collapse(true);

            selection.removeAllRanges();
            selection.addRange(newRange);
        }
        //saving the file in pc 
        async function saveAsTextFile() {
            const content = document.getElementById("textArea").innerText;

            try {
                const fileHandle = await window.showSaveFilePicker({
                    suggestedName: currentFile || "untitled.txt",
                    types: [{
                        description: 'Text Files',
                        accept: { 'text/plain': ['.txt'] }
                    }]
                });

                const writable = await fileHandle.createWritable();
                await writable.write(content);
                await writable.close();

                const fileName = fileHandle.name;

                // Update name and references
                files[fileName] = content;
                fileHandles[fileName] = fileHandle;

                // Remove old name if "Untitled-X"
                if (currentFile && currentFile.startsWith("Untitled-")) {
                    const oldIndex = openedFiles.indexOf(currentFile);
                    if (oldIndex !== -1) openedFiles[oldIndex] = fileName;
                    delete files[currentFile];
                }

                currentFile = fileName;
                document.getElementById("currentFileName").innerText = fileName;
                updateFileTabs();

                alert('File saved successfully!');
            } catch (err) {
                console.error('Save cancelled or failed', err);
                alert("Save cancelled or failed.");
            }
        }
        //wrap in the <>
        function wrapWithAngleBrackets() {
            const selection = window.getSelection();
            if (!selection.rangeCount) return;

            const range = selection.getRangeAt(0);
            if (!range || selection.isCollapsed) return; // nothing selected

            const selectedText = range.toString();
            const wrappedText = `<${selectedText}>`;

            const textNode = document.createTextNode(wrappedText);
            range.deleteContents(); // remove selected text
            range.insertNode(textNode); // insert new text with <>

            // Optional: move cursor after inserted text
            selection.removeAllRanges();
            const newRange = document.createRange();
            newRange.setStartAfter(textNode);
            newRange.collapse(true);
            selection.addRange(newRange);
        }
        //heading in the menu
        function headingElement(tag) {
            const editor = document.getElementById("textArea");
            const selection = window.getSelection();
            if (!selection.rangeCount) return;
            const range = selection.getRangeAt(0);
            const selectedText = selection.toString();
            let node = range.startContainer;
            let insideEditor = false;
            while (node) {
                if (node === editor) {
                    insideEditor = true;
                    break;
                }
                node = node.parentNode;
            }
            if (!insideEditor) {
                alert("Please select text inside the editor.");
                return;
            }
            if (selectedText.trim() === "") return;
            const wrapper = document.createElement(tag);
            wrapper.textContent = selectedText;
            range.deleteContents();
            range.insertNode(wrapper);
            const newRange = document.createRange();
            newRange.setStartAfter(wrapper);
            newRange.collapse(true);

            selection.removeAllRanges();
            selection.addRange(newRange);
        }

        // async function openFile() {
        //   try {
        //     const [fileHandle] = await window.showOpenFilePicker({
        //       types: [{
        //         description: 'Text or Markdown Files',
        //         accept: { 'text/plain': ['.txt', '.md'] }
        //       }]
        //     });

        //     const file = await fileHandle.getFile();
        //     const content = await file.text();

        //     // Get file name
        //     const fileName = file.name;

        //     //  Set current file
        //     currentFile = fileName;

        //     //  Add to opened files if not already there
        //     if (!openedFiles.includes(fileName)) {
        //       openedFiles.push(fileName);
        //     }

        //     //  Update file tabs
        //     updateFileTabs();

        //     //  Show current file name
        //     document.getElementById("currentFileName").textContent = fileName;

        //     //  Convert Markdown to HTML and display
        //     const htmlContent = marked.parse(content);
        //     document.getElementById("textArea").innerHTML = htmlContent;

        //   } catch (err) {
        //     console.error("Error opening file:", err);
        //   }
        // }
        if (currentFile) {
            fileContents[currentFile] = document.getElementById("textArea").innerHTML;
        }
        async function openFile(fileNameToOpen = null) {
            try {
                //  Save current editor content before switching
                if (currentFile) {
                    fileContents[currentFile] = document.getElementById("textArea").innerHTML;
                }

                let fileName;
                let content;

                if (fileNameToOpen) {
                    //  Switch to existing file/tab
                    fileName = fileNameToOpen;
                    content = fileContents[fileName] || "";
                } else {
                    //  Import new file
                    const [fileHandle] = await window.showOpenFilePicker({
                        types: [{
                            description: 'Text or Markdown Files',
                            accept: { 'text/plain': ['.txt', '.md'] }
                        }]
                    });

                    const file = await fileHandle.getFile();
                    const rawName = file.name;
                    content = await file.text();

                    //  Ensure unique name
                    let counter = 1;
                    fileName = rawName;
                    while (openedFiles.includes(fileName)) {
                        const base = rawName.replace(/\.[^/.]+$/, "");
                        const ext = rawName.match(/\.[^/.]+$/)?.[0] || "";
                        fileName = `${base} (${counter})${ext}`;
                        counter++;
                    }

                    //  Store content
                    openedFiles.push(fileName);
                    fileContents[fileName] = content;
                }

                //  Set current and render
                currentFile = fileName;
                document.getElementById("currentFileName").textContent = fileName;
                document.getElementById("textArea").innerHTML = marked.parse(content || "");
                updateStatsFromHTML(); //  Add this line

                updateFileTabs();
            } catch (err) {
                console.error("Error opening file:", err);
            }
        }

        function createUntitledFile() {
            const fileName = "Untitled";
            if (!openedFiles.includes(fileName)) {
                openedFiles.push(fileName);
                fileContents[fileName] = "Start writing here..."; // or "" if preferred
            }
            currentFile = fileName;
            document.getElementById("currentFileName").textContent = fileName;
            document.getElementById("textArea").innerHTML = marked.parse(fileContents[fileName]);
            updateFileTabs();
        }









        //when the user click on the save as 
        let currentFileHandle = null;

        // async function openFile() {
        //   try {
        //         const [fileHandle] = await window.showOpenFilePicker({
        //             types: [{
        //                 description: 'Text Files',
        //                 accept: { 'text/plain': ['.txt'] }
        //             }]
        //         });

        //         const file = await fileHandle.getFile();
        //         const content = await file.text();
        //         const fileName = file.name;

        //         // Save current file if any
        //         if (currentFile !== null) {
        //             files[currentFile] = document.getElementById("textArea").innerHTML;
        //         }

        //         // Set up the new file
        //         files[fileName] = content;
        //         fileHandles[fileName] = fileHandle;
        //         currentFile = fileName;

        //         if (!openedFiles.includes(fileName)) {
        //             openedFiles.push(fileName);
        //         }

        //         document.getElementById("currentFileName").innerText = fileName;
        //         document.getElementById("textArea").innerHTML = content;
        //         updateFileTabs();
        // if (err.name !== 'AbortError') {
        //   console.error('Failed:', err);
        //   alert("Save failed: " + err.message);
        // }

        //     } catch (err) {
        //         console.error("File open cancelled or failed", err);

        //     }}

        async function saveAs() {
            try {
                const content = document.getElementById("textArea").innerText;

                const newHandle = await window.showSaveFilePicker({
                    suggestedName: currentFileHandle?.name || "untitled.txt",
                    types: [{
                        description: "Text Files",
                        accept: { "text/plain": [".txt"] }
                    }]
                });

                const writable = await newHandle.createWritable();
                await writable.write(content);
                await writable.close();

                alert("File saved successfully.");
            } catch (err) {
                if (err.name !== 'AbortError') {
                    alert("Save As failed: " + err.message);
                }
            }
        }

        textArea.addEventListener('keydown', function (e) {
            if (e.key === 'Tab') {
                e.preventDefault(); // Prevent default tab behavior

                // Create 4 spaces or a tab character
                const tabSpaces = '\u00a0\u00a0\u00a0\u00a0'; // Non-breaking spaces

                // Insert spaces at caret position
                const selection = window.getSelection();
                const range = selection.getRangeAt(0);
                const tabNode = document.createTextNode(tabSpaces);
                range.insertNode(tabNode);

                // Move cursor after inserted spaces
                range.setStartAfter(tabNode);
                range.setEndAfter(tabNode);
                selection.removeAllRanges();
                selection.addRange(range);
            }
        });
        function insertSpacing() {
            const textArea = document.getElementById('textArea');
            textArea.focus();

            const selection = window.getSelection();
            if (!selection.rangeCount) return;

            const range = selection.getRangeAt(0);

            // Create a span element with 100px width spacer
            const spacer = document.createElement('span');
            spacer.style.display = 'inline-block';
            spacer.style.width = '100px';
            spacer.innerHTML = '&nbsp;'; // Needed to keep the span from collapsing

            range.insertNode(spacer);

            // Move cursor after the inserted span
            range.setStartAfter(spacer);
            range.setEndAfter(spacer);
            selection.removeAllRanges();
            selection.addRange(range);
        }
    </script>
</body>

</html>